(()=>{function y(){let m=document.querySelector(".page-sections"),c=document.querySelectorAll(".page-section"),i=document.querySelector(".nav-sections");if(i){let s=i.querySelector(".menu"),n=i.querySelectorAll(".menu-item-link"),d=i.querySelector(".active-line"),l=i.offsetHeight+24,a="active",t=0,u=!0,r=!0,g=()=>{t>=0&&t<n.length&&n[t].classList.add(a)},p=()=>{t>=0&&t<n.length&&n[t].classList.remove(a)};g();let v=()=>{if(t<0||t>=n.length)return;let e=n[t];if(!e)return;let o=e.getBoundingClientRect(),f=s.getBoundingClientRect();d.style.transform=`translateX(${s.scrollLeft-f.x+o.x}px)`,d.style.width=`${e.offsetWidth}px`},h=e=>{s.scrollTo({left:e,behavior:"smooth"})},L=()=>{if(t<0||t>=n.length)return;let e=n[t].getBoundingClientRect(),o=30;Math.floor(e.right)>window.innerWidth?h(s.scrollLeft+e.right-window.innerWidth+o):e.left<0&&h(s.scrollLeft+e.left-o)},w=e=>{p(),t=e,L(),g(),v()};(()=>{v(n[0]),document.documentElement.style.setProperty("--section-offset",l)})(),n.forEach((e,o)=>{e.addEventListener("click",f=>{f.preventDefault(),r=!1,w(o);let C=c[o].getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:C-l,behavior:"smooth"})})}),window.addEventListener("scroll",()=>{let e=m.getBoundingClientRect().top<0?c.length-1-[...c].reverse().findIndex(o=>window.pageYOffset>=o.getBoundingClientRect().top+window.pageYOffset-l*2):0;r&&t!==e?w(e):(window.clearTimeout(u),u=setTimeout(()=>r=!0,100))})}}window.addEventListener("DOMContentLoaded",y,!1);})();
